/*! dwAuthentication - v0.6.0 - 30-11-2015 */
!function(){"use strict";angular.module("dwAuthentication",[])}(),function(){"use strict";function a(a){a.interceptors.push(["$injector",function(a){return a.get("dwAuthInterceptor")}])}angular.module("dwAuthentication").value("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}).config(a),a.$inject=["$httpProvider"]}(),function(){"use strict";function a(){var a={loginUrl:"",verificationUrl:"",exclusiveRoles:!1,roles:{}},b={set:function(b){angular.extend(a,b)},$get:function(){return{loginUrl:a.loginUrl,verificationUrl:a.verificationUrl,exclusiveRoles:a.exclusiveRoles,roles:a.roles}},roles:function(){return a.roles}};return b}angular.module("dwAuthentication").provider("dwAuthConfig",a)}(),function(){"use strict";function a(a,b,c){var d={responseError:function(d){return a.$broadcast({401:c.notAuthenticated,403:c.notAuthorized,419:c.sessionTimeout,440:c.sessionTimeout}[d.status],d),b.reject(d)}};return d}angular.module("dwAuthentication").factory("dwAuthInterceptor",a),a.$inject=["$rootScope","$q","AUTH_EVENTS"]}(),function(){"use strict";function a(a,b,c){var d={login:function(d){return a.post(c.loginUrl,d).then(function(a){return b.create(a.data.id,a.data.user.id,a.data.user.role),a.data.user})},verfiy:function(d){return a.post(c.verificationUrl,d).then(function(a){return b.create(a.data.id,a.data.user.id,a.data.user.role),a.data.user})},isAuthenticated:function(){return!!b.userId},isAuthorized:function(a){return c.exclusiveRoles?(angular.isArray(a)||(a=[a]),-1!==a.indexOf(c.roles.all)||d.isAuthenticated()&&-1!==a.indexOf(b.userRole)):a===c.roles.all||d.isAuthenticated()&&b.userRole>=a}};return d}angular.module("dwAuthentication").factory("dwAuthService",a),a.$inject=["$http","Session","dwAuthConfig"]}(),function(){"use strict";function a(a){function c(b,c,d,e,f){f(b.$parent.$new(),function(d,e){var f=a(d)(b);c.replaceWith(f)})}var d={restrict:"EA",link:c,scope:{},controller:b,controllerAs:"vm",bindToController:!0,template:"<ng-transclude></ng-transclude>",transclude:!0,replace:!1};return d}function b(a,b,c,d,e){function f(){}var g=this;g.credentials={},f(),g.login=function(){d.login(g.credentials).then(function(a){b.$broadcast(c.loginSuccess),b.$broadcast("dw:userChanged",a)},function(){b.$broadcast(c.loginFailed)})}}angular.module("dwAuthentication").directive("dwLoginDialog",a),a.$inject=["$compile"],b.$inject=["$scope","$rootScope","AUTH_EVENTS","dwAuthService","Session"]}(),function(){"use strict";function a(){var a={create:function(a,b,c){this.id=a,this.userId=b,this.userRole=c},destroy:function(){this.id=null,this.userId=null,this.userRole=null},persist:function(a){a?console.log("permanent persist"):console.log("local persist")},load:function(){},check:function(){}};return a}angular.module("dwAuthentication").service("Session",a)}();
/*! dwAuthentication - v0.9.0 - 04-04-2016 */
!function(){"use strict";angular.module("dwAuthentication",[])}(),function(){"use strict";function a(a){a.interceptors.push(["$injector",function(a){return a.get("dwAuthInterceptor")}])}angular.module("dwAuthentication").value("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}).config(a),a.$inject=["$httpProvider"]}(),function(){"use strict";function a(){var a={loginUrl:"",verificationUrl:"",logoutUrl:"",exclusiveRoles:!1,roles:{}},b={set:function(b){angular.extend(a,b)},$get:function(){return{loginUrl:a.loginUrl,verificationUrl:a.verificationUrl,logoutUrl:a.logoutUrl,exclusiveRoles:a.exclusiveRoles,roles:a.roles}},roles:function(){return a.roles}};return b}angular.module("dwAuthentication").provider("dwAuthConfig",a)}(),function(){"use strict";function a(a,b,c){var d={responseError:function(d){return a.$broadcast({401:c.notAuthenticated,403:c.notAuthorized,419:c.sessionTimeout,440:c.sessionTimeout}[d.status],d),b.reject(d)}};return d}angular.module("dwAuthentication").factory("dwAuthInterceptor",a),a.$inject=["$rootScope","$q","AUTH_EVENTS"]}(),function(){"use strict";function a(a,b,c,d,e){var f={login:function(f,g){return a.post(c.loginUrl,f,g).then(function(a){return 0==a.data.error&&(b.create(a.data.id,a.data.user.id,a.data.user.role),e.$broadcast(d.loginSuccess),e.$broadcast("dw:userChanged",a.data.user)),a.data},function(){e.$broadcast(d.loginFailed)})},verify:function(b,d){return a.post(c.verificationUrl,b,d).then(function(a){return a.data})},logout:function(f,g){return a.post(c.logoutUrl,f,g).then(function(a){return b.destroy(),e.$broadcast(d.logoutSuccess),e.$broadcast("dw:userChanged",null),!0})["catch"](function(a){return!1})},isAuthenticated:function(){return!!b.userId},isAuthorized:function(a){return c.exclusiveRoles?(angular.isArray(a)||(a=[a]),-1!==a.indexOf(c.roles.all)||f.isAuthenticated()&&-1!==a.indexOf(b.userRole)):a===c.roles.all||f.isAuthenticated()&&b.userRole>=a}};return f}angular.module("dwAuthentication").factory("dwAuthService",a),a.$inject=["$http","Session","dwAuthConfig","AUTH_EVENTS","$rootScope"]}(),function(){"use strict";function a(){function a(){var a=(new Date).getTime(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&c|8).toString(16)});return b}var b={create:function(b,c){this.id=a(),this.userId=b,this.userRole=c},destroy:function(){this.id=null,this.userId=null,this.userRole=null},persist:function(a){a?console.log("permanent persist"):console.log("local persist")},load:function(){},check:function(){}};return b}angular.module("dwAuthentication").service("Session",a)}();